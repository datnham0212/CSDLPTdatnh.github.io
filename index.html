<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="login.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>
<body>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
 <link href="https://fonts.googleapis.com/css?family=Nunito:600,700,900" rel="stylesheet">

<body id="body">

<div id="login-card" class="card">
<div class="card-body">
  <h2 class="text-center">Login form</h2>
  <br>
  
    <div class="form-group">
      <input type="text" class="form-control" id="address" placeholder="Enter address" name="address">
    </div>
    <div class="form-group">
      <input type="password" class="form-control" id="password" placeholder="Enter password" name="pswd">
    </div>
    <button type="button" onclick=bhej() id="button" class="btn btn-primary deep-purple btn-block ">Submit</button>
<br>
    <br>

</div>
<div>      
    <script>
      var myaccount=localStorage.getItem("myaddress");
      window.onload=function(){
     //console.log(myaccount);
     if(myaccount!=null){
      window.location.replace('account.html');
     }
    }
       function bhej(){
        if (window.ethereum) {
            window.ethereum.enable().then(function(accounts){
                // Let the user select an account if they have more than one
                var addres = accounts[0]; // Default to the first account
                if (accounts.length > 1) {
                    var accountIndex = prompt("You have multiple accounts. Please enter the index of the account you want to use (starting from 0):");
                    if (accountIndex >= 0 && accountIndex < accounts.length) {
                        addres = accounts[accountIndex];
                    } else {
                        alert("Invalid account index. Defaulting to the first account.");
                    }
                }
                localStorage.setItem("myaddress", addres);
                window.location.replace('account.html');
            }).catch(function(error){
                console.log("Error connecting to MetaMask:", error);
            });
        } else {
            console.log("Non-Ethereum browser detected. You should consider trying MetaMask!");
        }
    }
    </script>
    </div>
    </body>
  </body>
</html>
